{% extends "layout.html" %}

{% set page = "specialeducationforum" %}

{% block title %}Special Education Forum{% endblock %}

{% block content %}
<div class="back">
  <div class="postBox">
    <table class="toprow">
      <tr>
        <td class="headCol1"><b>Resources and Announcements</b></td>
        <td class="headCol2"><input type="text" id="myInputAdmin" onkeyup="myFunction2()" placeholder="Search">   {% if logged_in %}<button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#adminModal">Post</button>{% endif %}</td>
      </tr>
    </table>
    <div class="scroll">
      <table class="adminPosts" id="targetSearchAdmin">
        {{ SEAPosts }}
      </table>
    </div>
  </div>
  <div class="postBox2">
    <div class="boxHeading">
      <table class="toprow">
        <tr>
          <td class="headCol1"><b>User Forum</b></td>
          <td class="headCol2"><input type="text" id="myInputUser" onkeyup="myFunction()" placeholder="Search">   <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#userModal">Post</button></td>
        </tr>
      </table>
    </div>
    <div class="scroll">
      <table class="userPosts" id="targetSearchUser">
        {{ SEUPosts }}
      </table>
    </div>
  </div>
</div>

<script>
function myFunction() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInputUser");
  filter = input.value.toUpperCase();
  table = document.getElementById("targetSearchUser");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[1];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}
function myFunction2() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInputAdmin");
  filter = input.value.toUpperCase();
  table = document.getElementById("targetSearchAdmin");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[1];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}
</script>
<div id="adminModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Admin Post:</h4>
      </div>
      <div class="modal-body">
        <form action="/adminSubmitPostSE" method="POST" id="adminform">
          <div class="form-group">
            <label for="name">Display Name:</label>
            <textarea class="form-control" rows="1" name="adminName" required></textarea>
          </div>
          <div class="form-group">
            <label for="title">Title:</label>
            <textarea class="form-control" rows="1" name="adminTitle" required></textarea>
          </div>
          <div class="form-group">
            <label for="adminMessage">Message:</label>
            <input name="adminMessage" type="hidden">
            <div id="editor">
              <p></p>
            </div>
            <script>
              var quill = new Quill('#editor', {
              theme: 'snow'
              });
            </script>
          </div>
          <!--<div class="form-group">
            <label for="adminComment">Message:</label>
            <input name="adminComment" type="hidden" required>
            <div id="editor">
              <p></p>
            </div>
          </div> -->
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div> 

<div id="userModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Create Post</h4>
      </div>
      <div class="modal-body">
        <form action="/userSubmitPostSE" method="POST" id="userform"> <!-- Replace most of this form with a jinja variable. An admin posting a comment or post on the user forum should not have to answer certain questions. -->
          <div class="form-group">
            <label for="title">Title:</label>
            <textarea class="form-control" rows="1" name="userTitle" maxlength="120" required></textarea>
          </div>
          <div class="form-group">
            <label for="userMessage">Message:</label>
            <input name="userMessage" type="hidden">
            <div id="editor2">
              <p></p>
            </div>
            <script>
              var quill2 = new Quill('#editor2', {
              theme: 'snow'
              });
            </script>
            <small id="characterLimit" class="form-text text-muted">
              12,000 character limit
            </small>
          </div>
          <br><br>
          <div class="form-group">
            <label for="user">Full Name:</label>
            <input type="text" class="form-control" name="userName" maxlength="70" required>
          </div>
          <div class="form-group">
            <label for="student">Student Name and Grade:</label>
            <input type="text" class="form-control" name="userStudent" maxlength="70" required>
          </div>
          <div class="form-group">
            <label for="email">Email Address (optional):</label>
            <input type="email" class="form-control" name="userEmail" maxlength="254">
            <small id="emailHelpBlock" class="form-text text-muted">
              An email will be sent to you when a staff member responds to your post.
            </small>
          </div>
          <br>
          <div class="checkbox">
          <label class="checkbox-inline">
          <input type="checkbox" name="anon" checked value="true" />
          <input type="hidden" name="anon" value="false" />
          Make Anonymous to Other Parents</label>
          </div>
          <!--<div class="checkbox">-->
            <!-- <label class="checkbox-inline"><input type="checkbox" value="userAnon">Make Anonymous to Other Parents</label> -->
          <!--</div>-->
          <br>
          <button type="submit" class="btn btn-primary">Submit</button>
          <small id="generalVet" class="form-text text-muted">
            Your post will not show on the forum until an admin approves it and you will not be able to edit your post.
          </small>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div> 
<footer>
  <div class="footerBox">
    <table>
      <tr class="noBorder">
        <td><img src="static/images/SB.jpg" alt="SBHSLogo" class="footerIm"></td>
        <td class = "footerText"> <u> Santa Barbara High School </u> <br> 700 East Anapamu St. Santa Barbara, CA 93103 <br> Phone: (805) 966-9101 <br> TDD: (805) 966-9101 x281 <br> Fax: (805) 965-6872</td>
      </tr>
    </table>
    <table class="links">
      <tr class="noBorder">
        <td><a href="https://www.sbunified.org/accessibility-statement" class="footerLinks">Accesibility Statement</a><a href="https://www.sbunified.org/nondiscrimination-statement" class="footerLinks">Nondiscrimination Statement</a><a href="https://www.sbhsdons.org/pdf/Campus%20Map.pdf" class="footerLinks">Campus Map</a><a href="https://www.sbunified.org/support/contact-us" class="footerLinks">Contact SB Unified School District</a></td>
      </tr>
    </table>
  </div>
</footer>
{% endblock %}
